(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
// Heap On Top
var Heap = (function () {
    function Heap(heapArr) {
        this.heap = [];
        this.heap = [];
        for (var i = 0, len = heapArr.length; i < len; i++) {
            this.push(heapArr[i]);
        }
    }
    // public function
    // ---------------
    Heap.prototype.get = function (index) {
        if (index >= 0 && index < this.heap.length) {
            return this.heap[index];
        }
    };
    Heap.prototype.push = function (node) {
        this.heap.push(node);
        this.goUp(this.heap.length - 1);
        console.log("this.heap -- ", this.heap);
    };
    Heap.prototype.pop = function () {
        if (this.isEmpty())
            return;
        var result;
        this.swap(0, this.heap.length - 1);
        result = this.heap.pop();
        !this.isEmpty() && this.goDown(0);
        return result;
    };
    Heap.prototype.remove = function (index) {
        if (index < 0 || index >= this.heap.length)
            return;
    };
    Heap.prototype.top = function () {
        if (this.heap[0])
            return this.heap[0];
    };
    // 获取通过 key 指定的值
    Heap.prototype.getValue = function (index) {
        if (index < 0 || index >= this.heap.length)
            return;
        return this.heap[index];
    };
    Heap.prototype.isEmpty = function () {
        return !this.heap.length;
    };
    // private function
    // ---------------
    Heap.prototype.goUp = function (index) {
        var heap = this;
        var value = heap.getValue(index), parent = heap.getParentIndex(index);
        if (parent === undefined)
            return;
        if (heap.getValue(parent) > heap.getValue(index)) {
            this.swap(index, parent);
            this.goUp(parent);
        }
    };
    Heap.prototype.goDown = function (index) {
        var heap = this;
        var value = heap.getValue(index), _a = heap.getChildIndex(index), left = _a[0], right = _a[1];
        if (left && right) {
            var swapIndex = heap.getValue(left) < heap.getValue(right) ? left : right;
            if (heap.getValue(swapIndex) < value) {
                heap.swap(index, swapIndex);
                heap.goDown(swapIndex);
            }
        }
        else if (left !== null) {
            if (heap.getValue(left) < value) {
                heap.swap(index, left);
                heap.goDown(left);
            }
        }
        else {
            console.log("go down: no children!");
        }
    };
    Heap.prototype.getParentIndex = function (index) {
        if (index < 0 || index >= this.heap.length)
            return;
        if (index === 0)
            return 0;
        return Math.floor((index - 1) / 2);
    };
    Heap.prototype.getChildIndex = function (index) {
        var left = 2 * index + 1, right = 2 * index + 2, length = this.heap.length;
        if (right <= length - 1) {
            return [left, right];
        }
        else if (left === length - 1) {
            return [left, null];
        }
        else {
            return [null, null];
        }
    };
    Heap.prototype.swap = function (parentIndex, childIndex) {
        var tmp = this.heap[parentIndex];
        this.heap[parentIndex] = this.heap[childIndex];
        this.heap[childIndex] = tmp;
    };
    return Heap;
}());
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Heap;
},{}],2:[function(require,module,exports){
// import Game from "./game";
// let game = new Game( "container", 3 );
//
// console.log( game );
// console.log( "------------------------" );
"use strict";
var heap2_1 = require('./heap2');
console.log("------------------------");
var heap = new heap2_1.default([3, 5, 4, 1, 2, 19, 18, 22, 12, 7]);
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
console.log(heap.pop());
console.log(heap.heap);
},{"./heap2":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvaGVhcDIudHMiLCJzcmMvdHMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQSxjQUFjO0FBQ2Q7SUFFRSxjQUFhLE9BQWlCO1FBRDlCLFNBQUksR0FBYSxFQUFFLENBQUE7UUFFakIsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7UUFDZixHQUFHLENBQUMsQ0FBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUcsRUFBRSxDQUFDO1lBQ3JELElBQUksQ0FBQyxJQUFJLENBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFFLENBQUM7UUFDMUIsQ0FBQztJQUNILENBQUM7SUFFRCxrQkFBa0I7SUFDbEIsa0JBQWtCO0lBQ2xCLGtCQUFHLEdBQUgsVUFBSyxLQUFhO1FBQ2hCLEVBQUUsQ0FBQyxDQUFFLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTyxDQUFDLENBQUEsQ0FBQztZQUM1QyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBRSxLQUFLLENBQUUsQ0FBQztRQUM1QixDQUFDO0lBQ0gsQ0FBQztJQUNELG1CQUFJLEdBQUosVUFBTSxJQUFZO1FBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFFLElBQUksQ0FBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFFLENBQUM7UUFDbEMsT0FBTyxDQUFDLEdBQUcsQ0FBRSxlQUFlLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBRSxDQUFDO0lBQzVDLENBQUM7SUFDRCxrQkFBRyxHQUFIO1FBQ0UsRUFBRSxDQUFDLENBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRyxDQUFDO1lBQUMsTUFBTSxDQUFDO1FBQzdCLElBQUksTUFBTSxDQUFDO1FBQ1gsSUFBSSxDQUFDLElBQUksQ0FBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFFLENBQUM7UUFDckMsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDekIsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsQyxNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFDRCxxQkFBTSxHQUFOLFVBQVEsS0FBYTtRQUNuQixFQUFFLENBQUEsQ0FBRSxLQUFLLEdBQUcsQ0FBQyxJQUFJLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU8sQ0FBQztZQUFDLE1BQU0sQ0FBQztJQUN0RCxDQUFDO0lBQ0Qsa0JBQUcsR0FBSDtRQUNFLEVBQUUsQ0FBQyxDQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFFLENBQUM7WUFBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBQ0QsZ0JBQWdCO0lBQ2hCLHVCQUFRLEdBQVIsVUFBVSxLQUFhO1FBQ3JCLEVBQUUsQ0FBQSxDQUFFLEtBQUssR0FBRyxDQUFDLElBQUksS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTyxDQUFDO1lBQUMsTUFBTSxDQUFDO1FBQ3BELE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFDRCxzQkFBTyxHQUFQO1FBQ0UsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDM0IsQ0FBQztJQUNELG1CQUFtQjtJQUNuQixrQkFBa0I7SUFDVixtQkFBSSxHQUFaLFVBQWEsS0FBYTtRQUN4QixJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7UUFDaEIsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFDNUIsTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFeEMsRUFBRSxDQUFDLENBQUUsTUFBTSxLQUFLLFNBQVUsQ0FBQztZQUFDLE1BQU0sQ0FBQztRQUVuQyxFQUFFLENBQUMsQ0FBRSxJQUFJLENBQUMsUUFBUSxDQUFFLE1BQU0sQ0FBRSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUUsS0FBSyxDQUFHLENBQUMsQ0FBQSxDQUFDO1lBQ3RELElBQUksQ0FBQyxJQUFJLENBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBRSxDQUFDO1lBQzNCLElBQUksQ0FBQyxJQUFJLENBQUUsTUFBTSxDQUFFLENBQUM7UUFDdEIsQ0FBQztJQUNILENBQUM7SUFDTyxxQkFBTSxHQUFkLFVBQWUsS0FBYTtRQUMxQixJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7UUFDaEIsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFDNUIsOEJBQXlDLEVBQXhDLFlBQUksRUFBRSxhQUFLLENBQThCO1FBRTlDLEVBQUUsQ0FBQyxDQUFFLElBQUksSUFBSSxLQUFNLENBQUMsQ0FBQSxDQUFDO1lBQ25CLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLEdBQUcsS0FBSyxDQUFDO1lBQzFFLEVBQUUsQ0FBQyxDQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEdBQUcsS0FBTSxDQUFDLENBQUMsQ0FBQztnQkFDdkMsSUFBSSxDQUFDLElBQUksQ0FBRSxLQUFLLEVBQUUsU0FBUyxDQUFFLENBQUM7Z0JBQzlCLElBQUksQ0FBQyxNQUFNLENBQUUsU0FBUyxDQUFFLENBQUM7WUFDM0IsQ0FBQztRQUNILENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUUsSUFBSSxLQUFLLElBQUssQ0FBQyxDQUFDLENBQUM7WUFDM0IsRUFBRSxDQUFDLENBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFFLEtBQUssRUFBRSxJQUFJLENBQUUsQ0FBQztnQkFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBRSxJQUFJLENBQUUsQ0FBQztZQUN0QixDQUFDO1FBQ0gsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sT0FBTyxDQUFDLEdBQUcsQ0FBRSx1QkFBdUIsQ0FBRSxDQUFDO1FBQ3pDLENBQUM7SUFDSCxDQUFDO0lBQ08sNkJBQWMsR0FBdEIsVUFBd0IsS0FBYTtRQUNuQyxFQUFFLENBQUMsQ0FBRSxLQUFLLEdBQUcsQ0FBQyxJQUFJLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU8sQ0FBQztZQUFDLE1BQU0sQ0FBQztRQUNyRCxFQUFFLENBQUMsQ0FBRSxLQUFLLEtBQUssQ0FBRSxDQUFDO1lBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBRSxDQUFDLEtBQUssR0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUUsQ0FBQztJQUNuQyxDQUFDO0lBQ08sNEJBQWEsR0FBckIsVUFBdUIsS0FBYTtRQUNsQyxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUMsS0FBSyxHQUFHLENBQUMsRUFDbEIsS0FBSyxHQUFHLENBQUMsR0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUNuQixNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFFOUIsRUFBRSxDQUFDLENBQUUsS0FBSyxJQUFJLE1BQU0sR0FBRyxDQUFFLENBQUMsQ0FBQSxDQUFDO1lBQ3pCLE1BQU0sQ0FBQyxDQUFFLElBQUksRUFBRSxLQUFLLENBQUUsQ0FBQztRQUN6QixDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFFLElBQUksS0FBSyxNQUFNLEdBQUcsQ0FBRSxDQUFDLENBQUMsQ0FBQztZQUNqQyxNQUFNLENBQUMsQ0FBRSxJQUFJLEVBQUUsSUFBSSxDQUFFLENBQUM7UUFDeEIsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sTUFBTSxDQUFDLENBQUUsSUFBSSxFQUFFLElBQUksQ0FBRSxDQUFDO1FBQ3hCLENBQUM7SUFDSCxDQUFDO0lBQ08sbUJBQUksR0FBWixVQUFjLFdBQW1CLEVBQUUsVUFBa0I7UUFDbkQsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNqQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDL0MsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxHQUFHLENBQUM7SUFDOUIsQ0FBQztJQUdILFdBQUM7QUFBRCxDQXRHQSxBQXNHQyxJQUFBO0FBdEdEO3NCQXNHQyxDQUFBOztBQ3ZHRCw2QkFBNkI7QUFDN0IseUNBQXlDO0FBQ3pDLEVBQUU7QUFDRix1QkFBdUI7QUFDdkIsNkNBQTZDOztBQUU3QyxzQkFBaUIsU0FBUyxDQUFDLENBQUE7QUFFM0IsT0FBTyxDQUFDLEdBQUcsQ0FBRSwwQkFBMEIsQ0FBRSxDQUFDO0FBRTFDLElBQUksSUFBSSxHQUFHLElBQUksZUFBSSxDQUFFLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUUsQ0FBQztBQUUzRCxPQUFPLENBQUMsR0FBRyxDQUFFLElBQUksQ0FBQyxJQUFJLENBQUUsQ0FBQztBQUV6QixPQUFPLENBQUMsR0FBRyxDQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBRSxDQUFDO0FBQzFCLE9BQU8sQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFDLElBQUksQ0FBRSxDQUFDO0FBRXpCLE9BQU8sQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFFLENBQUM7QUFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FBRSxJQUFJLENBQUMsSUFBSSxDQUFFLENBQUM7QUFFekIsT0FBTyxDQUFDLEdBQUcsQ0FBRSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUUsQ0FBQztBQUMxQixPQUFPLENBQUMsR0FBRyxDQUFFLElBQUksQ0FBQyxJQUFJLENBQUUsQ0FBQztBQUV6QixPQUFPLENBQUMsR0FBRyxDQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBRSxDQUFDO0FBQzFCLE9BQU8sQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFDLElBQUksQ0FBRSxDQUFDO0FBRXpCLE9BQU8sQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFFLENBQUM7QUFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FBRSxJQUFJLENBQUMsSUFBSSxDQUFFLENBQUM7QUFFekIsT0FBTyxDQUFDLEdBQUcsQ0FBRSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUUsQ0FBQztBQUMxQixPQUFPLENBQUMsR0FBRyxDQUFFLElBQUksQ0FBQyxJQUFJLENBQUUsQ0FBQztBQUV6QixPQUFPLENBQUMsR0FBRyxDQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBRSxDQUFDO0FBQzFCLE9BQU8sQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFDLElBQUksQ0FBRSxDQUFDO0FBRXpCLE9BQU8sQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFFLENBQUM7QUFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FBRSxJQUFJLENBQUMsSUFBSSxDQUFFLENBQUM7QUFFekIsT0FBTyxDQUFDLEdBQUcsQ0FBRSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUUsQ0FBQztBQUMxQixPQUFPLENBQUMsR0FBRyxDQUFFLElBQUksQ0FBQyxJQUFJLENBQUUsQ0FBQztBQUV6QixPQUFPLENBQUMsR0FBRyxDQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBRSxDQUFDO0FBQzFCLE9BQU8sQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFDLElBQUksQ0FBRSxDQUFDO0FBRXpCLE9BQU8sQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFFLENBQUM7QUFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FBRSxJQUFJLENBQUMsSUFBSSxDQUFFLENBQUM7QUFFekIsT0FBTyxDQUFDLEdBQUcsQ0FBRSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUUsQ0FBQztBQUMxQixPQUFPLENBQUMsR0FBRyxDQUFFLElBQUksQ0FBQyxJQUFJLENBQUUsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvLyBIZWFwIE9uIFRvcFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWFwe1xyXG4gIGhlYXA6IG51bWJlcltdID0gW11cclxuICBjb25zdHJ1Y3RvciggaGVhcEFycjogbnVtYmVyW10gKXtcclxuICAgIHRoaXMuaGVhcCA9IFtdO1xyXG4gICAgZm9yICggbGV0IGkgPSAwLCBsZW4gPSBoZWFwQXJyLmxlbmd0aDsgaSA8IGxlbjsgaSArKyApe1xyXG4gICAgICB0aGlzLnB1c2goIGhlYXBBcnJbaV0gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIHB1YmxpYyBmdW5jdGlvblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxyXG4gIGdldCggaW5kZXg6IG51bWJlciApe1xyXG4gICAgaWYgKCBpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5oZWFwLmxlbmd0aCApe1xyXG4gICAgICByZXR1cm4gdGhpcy5oZWFwWyBpbmRleCBdO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdXNoKCBub2RlOiBudW1iZXIgKXtcclxuICAgIHRoaXMuaGVhcC5wdXNoKCBub2RlICk7XHJcbiAgICB0aGlzLmdvVXAoIHRoaXMuaGVhcC5sZW5ndGggLSAxICk7XHJcbiAgICBjb25zb2xlLmxvZyggXCJ0aGlzLmhlYXAgLS0gXCIsIHRoaXMuaGVhcCApO1xyXG4gIH1cclxuICBwb3AoKXtcclxuICAgIGlmICggdGhpcy5pc0VtcHR5KCkgKSByZXR1cm47XHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gICAgdGhpcy5zd2FwKCAwLCB0aGlzLmhlYXAubGVuZ3RoIC0gMSApO1xyXG4gICAgcmVzdWx0ID0gdGhpcy5oZWFwLnBvcCgpO1xyXG4gICAgIXRoaXMuaXNFbXB0eSgpICYmIHRoaXMuZ29Eb3duKDApO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbiAgcmVtb3ZlKCBpbmRleDogbnVtYmVyICl7XHJcbiAgICBpZiggaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuaGVhcC5sZW5ndGggKSByZXR1cm47XHJcbiAgfVxyXG4gIHRvcCgpe1xyXG4gICAgaWYgKCB0aGlzLmhlYXBbMF0gKSByZXR1cm4gdGhpcy5oZWFwWzBdO1xyXG4gIH1cclxuICAvLyDojrflj5bpgJrov4cga2V5IOaMh+WumueahOWAvFxyXG4gIGdldFZhbHVlKCBpbmRleDogbnVtYmVyICl7XHJcbiAgICBpZiggaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuaGVhcC5sZW5ndGggKSByZXR1cm47XHJcbiAgICByZXR1cm4gdGhpcy5oZWFwW2luZGV4XTtcclxuICB9XHJcbiAgaXNFbXB0eSgpe1xyXG4gICAgcmV0dXJuICF0aGlzLmhlYXAubGVuZ3RoO1xyXG4gIH1cclxuICAvLyBwcml2YXRlIGZ1bmN0aW9uXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXHJcbiAgcHJpdmF0ZSBnb1VwKGluZGV4OiBudW1iZXIpe1xyXG4gICAgbGV0IGhlYXAgPSB0aGlzO1xyXG4gICAgbGV0IHZhbHVlID0gaGVhcC5nZXRWYWx1ZShpbmRleCksXHJcbiAgICAgICAgcGFyZW50ID0gaGVhcC5nZXRQYXJlbnRJbmRleChpbmRleCk7XHJcblxyXG4gICAgaWYgKCBwYXJlbnQgPT09IHVuZGVmaW5lZCApIHJldHVybjtcclxuXHJcbiAgICBpZiAoIGhlYXAuZ2V0VmFsdWUoIHBhcmVudCApID4gaGVhcC5nZXRWYWx1ZSggaW5kZXggKSApe1xyXG4gICAgICB0aGlzLnN3YXAoIGluZGV4LCBwYXJlbnQgKTtcclxuICAgICAgdGhpcy5nb1VwKCBwYXJlbnQgKTtcclxuICAgIH1cclxuICB9XHJcbiAgcHJpdmF0ZSBnb0Rvd24oaW5kZXg6IG51bWJlcil7XHJcbiAgICBsZXQgaGVhcCA9IHRoaXM7XHJcbiAgICBsZXQgdmFsdWUgPSBoZWFwLmdldFZhbHVlKGluZGV4KSxcclxuICAgICAgICBbbGVmdCwgcmlnaHRdID0gaGVhcC5nZXRDaGlsZEluZGV4KGluZGV4KTtcclxuXHJcbiAgICBpZiAoIGxlZnQgJiYgcmlnaHQgKXtcclxuICAgICAgbGV0IHN3YXBJbmRleCA9IGhlYXAuZ2V0VmFsdWUobGVmdCkgPCBoZWFwLmdldFZhbHVlKHJpZ2h0KSA/IGxlZnQgOiByaWdodDtcclxuICAgICAgaWYgKCBoZWFwLmdldFZhbHVlKHN3YXBJbmRleCkgPCB2YWx1ZSApIHtcclxuICAgICAgICBoZWFwLnN3YXAoIGluZGV4LCBzd2FwSW5kZXggKTtcclxuICAgICAgICBoZWFwLmdvRG93biggc3dhcEluZGV4ICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoIGxlZnQgIT09IG51bGwgKSB7XHJcbiAgICAgIGlmICggaGVhcC5nZXRWYWx1ZShsZWZ0KSA8IHZhbHVlICkge1xyXG4gICAgICAgIGhlYXAuc3dhcCggaW5kZXgsIGxlZnQgKTtcclxuICAgICAgICBoZWFwLmdvRG93biggbGVmdCApO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyggXCJnbyBkb3duOiBubyBjaGlsZHJlbiFcIiApO1xyXG4gICAgfVxyXG4gIH1cclxuICBwcml2YXRlIGdldFBhcmVudEluZGV4KCBpbmRleDogbnVtYmVyICl7XHJcbiAgICBpZiAoIGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLmhlYXAubGVuZ3RoICkgcmV0dXJuO1xyXG4gICAgaWYgKCBpbmRleCA9PT0gMCApIHJldHVybiAwO1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoIChpbmRleC0xKS8yICk7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0Q2hpbGRJbmRleCggaW5kZXg6IG51bWJlciApe1xyXG4gICAgbGV0IGxlZnQgPSAyKmluZGV4ICsgMSxcclxuICAgICAgICByaWdodCA9IDIqaW5kZXggKyAyLFxyXG4gICAgICAgIGxlbmd0aCA9IHRoaXMuaGVhcC5sZW5ndGg7XHJcblxyXG4gICAgaWYgKCByaWdodCA8PSBsZW5ndGggLSAxICl7XHJcbiAgICAgIHJldHVybiBbIGxlZnQsIHJpZ2h0IF07XHJcbiAgICB9IGVsc2UgaWYgKCBsZWZ0ID09PSBsZW5ndGggLSAxICkge1xyXG4gICAgICByZXR1cm4gWyBsZWZ0LCBudWxsIF07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gWyBudWxsLCBudWxsIF07XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgc3dhcCggcGFyZW50SW5kZXg6IG51bWJlciwgY2hpbGRJbmRleDogbnVtYmVyICl7XHJcbiAgICBsZXQgdG1wID0gdGhpcy5oZWFwW3BhcmVudEluZGV4XTtcclxuICAgIHRoaXMuaGVhcFtwYXJlbnRJbmRleF0gPSB0aGlzLmhlYXBbY2hpbGRJbmRleF07XHJcbiAgICB0aGlzLmhlYXBbY2hpbGRJbmRleF0gPSB0bXA7XHJcbiAgfVxyXG4gIC8vIHN0YXRpYyBmdW5jdGlvblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxyXG59XHJcbiIsIi8vIGltcG9ydCBHYW1lIGZyb20gXCIuL2dhbWVcIjtcclxuLy8gbGV0IGdhbWUgPSBuZXcgR2FtZSggXCJjb250YWluZXJcIiwgMyApO1xyXG4vL1xyXG4vLyBjb25zb2xlLmxvZyggZ2FtZSApO1xyXG4vLyBjb25zb2xlLmxvZyggXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiApO1xyXG5cclxuaW1wb3J0IEhlYXAgZnJvbSAnLi9oZWFwMic7XHJcblxyXG5jb25zb2xlLmxvZyggXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiApO1xyXG5cclxubGV0IGhlYXAgPSBuZXcgSGVhcCggWyAzLCA1LCA0LCAxLCAyLCAxOSwgMTgsIDIyLCAxMiwgN10gKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuXHJcbmNvbnNvbGUubG9nKCBoZWFwLnBvcCgpICk7XHJcbmNvbnNvbGUubG9nKCBoZWFwLmhlYXAgKTtcclxuIl19
